/**
 * @file: menu.c
 * @author: Honokawings (1915569481@qq.com)
 * @description: 菜单结构建立
 * @version 0.1
 * @date: 2020-10-22 16:10:99
 * 
 * @copyright Copyright (c) 2020
 * 
 */
#include "menu.h"

//从上至下 逆序字符
static u8 code str_menu[][32]=
{
{0x00,0x02,0x02,0xC2,0x02,0x02,0x02,0xFE,0x82,0x82,0x82,0x82,0x82,0x02,0x00,0x00,0x40,0x40,0x40,0x7F,0x40,0x40,0x40,0x7F,
 0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x00},/*"正",0*/
{0x02,0xE2,0x22,0x22,0x3E,0x00,0x08,0x88,0x48,0x39,0x0E,0x08,0xC8,0x08,0x08,0x00,0x00,0x43,0x82,0x42,0x3E,0x00,0x21,0x71,
 0x29,0x25,0x23,0x21,0x28,0x70,0x00,0x00},/*"弦",1*/
{0x10,0x60,0x02,0x0C,0xC0,0x00,0xF8,0x88,0x88,0x88,0xFF,0x88,0x88,0xA8,0x18,0x00,0x04,0x04,0x7C,0x03,0x80,0x60,0x1F,0x80,
 0x43,0x2C,0x10,0x28,0x46,0x81,0x80,0x00},/*"波",2*/
{0x80,0x82,0x82,0xFE,0x82,0x82,0xFE,0x82,0x82,0x80,0x20,0x10,0x08,0x86,0x60,0x00,0x80,0x40,0x30,0x0F,0x00,0x00,0xFF,0x00,
 0x00,0x80,0x84,0x42,0x21,0x10,0x0C,0x00},/*"形",3*/


{0x00,0x04,0x84,0x84,0x84,0x84,0x84,0x84,0x84,0x84,0x84,0x84,0x84,0x04,0x00,0x00,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x00},/*"三",0*/
{0x20,0x10,0xE8,0x24,0x27,0x24,0x24,0xE4,0x24,0x34,0x2C,0x20,0xE0,0x00,0x00,0x00,0x80,0x60,0x1F,0x09,0x09,0x09,0x09,0x7F,
0x09,0x09,0x49,0x89,0x7F,0x00,0x00,0x00},/*"角",1*/
{0x10,0x60,0x02,0x0C,0xC0,0x00,0xF8,0x88,0x88,0x88,0xFF,0x88,0x88,0xA8,0x18,0x00,0x04,0x04,0x7C,0x03,0x80,0x60,0x1F,0x80,
0x43,0x2C,0x10,0x28,0x46,0x81,0x80,0x00},/*"波",2*/
{0x80,0x82,0x82,0xFE,0x82,0x82,0xFE,0x82,0x82,0x80,0x20,0x10,0x08,0x86,0x60,0x00,0x80,0x40,0x30,0x0F,0x00,0x00,0xFF,0x00,
0x00,0x80,0x84,0x42,0x21,0x10,0x0C,0x00},/*"形",3*/

{0x00,0xFE,0x22,0x22,0xFE,0x00,0x40,0x48,0xC8,0x09,0xFA,0xE4,0x40,0x20,0x10,0x00,0x80,0x7F,0x02,0x82,0xFF,0x20,0x10,0x0C,
0x43,0x80,0x7F,0x00,0x07,0x18,0x20,0x00},/*"脉",0*/
{0x00,0x02,0x0C,0xC0,0x00,0xF0,0x10,0x10,0x10,0xFF,0x10,0x10,0x10,0xF0,0x00,0x00,0x02,0x02,0x7F,0x00,0x00,0x0F,0x04,0x04,
0x04,0xFF,0x04,0x04,0x04,0x0F,0x00,0x00},/*"冲",1*/
{0x08,0x08,0x08,0x08,0x08,0xF8,0x89,0x8E,0x88,0x88,0x88,0x88,0x08,0x08,0x08,0x00,0x00,0x80,0x40,0x20,0x18,0x07,0x00,0x00,
0x40,0x80,0x40,0x3F,0x00,0x00,0x00,0x00},/*"方",2*/
{0x10,0x60,0x02,0x0C,0xC0,0x00,0xF8,0x88,0x88,0x88,0xFF,0x88,0x88,0xA8,0x18,0x00,0x04,0x04,0x7C,0x03,0x80,0x60,0x1F,0x80,
0x43,0x2C,0x10,0x28,0x46,0x81,0x80,0x00},/*"波",3*/

{0x00,0x02,0x02,0xC2,0x02,0x02,0x02,0xFE,0x82,0x82,0x82,0x82,0x82,0x02,0x00,0x00,0x40,0x40,0x40,0x7F,0x40,0x40,0x40,0x7F,
0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x00},/*"正",0*/
{0x02,0xE2,0x22,0x22,0x3E,0x00,0x08,0x88,0x48,0x39,0x0E,0x08,0xC8,0x08,0x08,0x00,0x00,0x43,0x82,0x42,0x3E,0x00,0x21,0x71,
0x29,0x25,0x23,0x21,0x28,0x70,0x00,0x00},/*"弦",1*/
{0x00,0xFE,0x22,0x22,0xFE,0x00,0x40,0x48,0xC8,0x09,0xFA,0xE4,0x40,0x20,0x10,0x00,0x80,0x7F,0x02,0x82,0xFF,0x20,0x10,0x0C,
0x43,0x80,0x7F,0x00,0x07,0x18,0x20,0x00},/*"脉",2*/
{0x00,0x02,0x0C,0xC0,0x00,0xF0,0x10,0x10,0x10,0xFF,0x10,0x10,0x10,0xF0,0x00,0x00,0x02,0x02,0x7F,0x00,0x00,0x0F,0x04,0x04,
0x04,0xFF,0x04,0x04,0x04,0x0F,0x00,0x00},/*"冲",3*/
{0x08,0x08,0x08,0x08,0x08,0xF8,0x89,0x8E,0x88,0x88,0x88,0x88,0x08,0x08,0x08,0x00,0x00,0x80,0x40,0x20,0x18,0x07,0x00,0x00,
0x40,0x80,0x40,0x3F,0x00,0x00,0x00,0x00},/*"方",4*/
{0x10,0x60,0x02,0x0C,0xC0,0x00,0xF8,0x88,0x88,0x88,0xFF,0x88,0x88,0xA8,0x18,0x00,0x04,0x04,0x7C,0x03,0x80,0x60,0x1F,0x80,
0x43,0x2C,0x10,0x28,0x46,0x81,0x80,0x00}/*"波",5*/
};

//手动构建菜单
MenuIndex code menu_gather[5]=
{
    {0,0,0,1,0,(*menu0)},
    {1,4,2,1,0,(*menu1)},
    {2,1,3,2,0,(*menu2)},
    {3,2,4,3,0,(*menu3)},
    {4,3,1,4,0,(*menu4)}
};

void menu0()
{
    show_sentence(1,str_menu[0],4,0);
    show_sentence(2,str_menu[4],4,0);
    show_sentence(3,str_menu[8],4,0);
    show_sentence(4,str_menu[12],6,0);
}

void menu1()
{
    show_sentence(1,str_menu[0],4,1);
    show_sentence(2,str_menu[4],4,0);
    show_sentence(3,str_menu[8],4,0);
    show_sentence(4,str_menu[12],6,0);
}

void menu2()
{
    show_sentence(1,str_menu[0],4,0);
    show_sentence(2,str_menu[4],4,1);
    show_sentence(3,str_menu[8],4,0);
    show_sentence(4,str_menu[12],6,0);
}

void menu3()
{
    show_sentence(1,str_menu[0],4,0);
    show_sentence(2,str_menu[4],4,0);
    show_sentence(3,str_menu[8],4,1);
    show_sentence(4,str_menu[12],6,0);
}

void menu4()
{
    show_sentence(1,str_menu[0],4,0);
    show_sentence(2,str_menu[4],4,0);
    show_sentence(3,str_menu[8],4,0);
    show_sentence(4,str_menu[12],6,1);
}

//注释部分为待拓展结构，慎删除
//C51构建树形结构不好处理内存分配问题
// /**
//  * @description: 创建新的同级下一节点
//  * 
//  * @param: head 此级菜单的头节点
//  * @param: function 新节点功能
//  * @param: name 新节点名称
//  * @return: menu_t* 返回创建的节点
//  */
// menu_t *add_same_node(menu_t *head ,void *function,u8 function_id , u8 *name )
// {
//     menu_t *p=NULL,*pr=head;
//     p=(menu_t *)malloc(sizeof(menu_t));//创建空节点

//     if(head==NULL)  //头节点为空，则创建头节点
//     {
//         head=p;
//         p->id=0;         
//     }
//     else    //头节点不为空
//     {
//         u8 i=0;
//         while (pr->same_down!=NULL) //寻找并转到同级菜单的最后节点
//         {
//             i++;
//             pr=pr->same_down;
//         }
//         pr->same_down=p;//创建同级节点
//         p->same_up=pr;
//         p->father=head->father;//和头节点拥有同样的父节点
//         p->id=i;
//     }
//     p->function=function;//补充新节点的信息
//     p->function_id=function_id;
//     p->menu_name=name;
//     p->son=NULL;
//     p->same_down=NULL;
//     return p;//返回新建的节点
// }

// /**
//  * @description: 创建子节点
//  * 
//  * @param: head 当前列表头节点
//  * @param: num 列表要创建子节点的节点编号
//  * @param: function 节点函数功能
//  * @param: name 节点名称
//  * @return: menu_t* 返回该位置的子节点或者新节点
//  */
// menu_t *add_son_node(menu_t *head, u8 num, void *function,u8 function_id ,u8 *name )
// {
//     u8 i;
//     menu_t *pr=head;
    
//     for(i=0;i<num;i++)//遍历寻址
//     {
//         if(pr->same_down!=NULL)
//         {
//             pr=pr->same_down;
//         }
//     }

//     if(pr->son!=NULL)//是否存在子节点
//     {
//         pr=pr->son;
//     }
//     else
//     {
//         menu_t *p=NULL;
//         p=(menu_t *)malloc(sizeof(menu_t)); //创建空节点

//         pr->son=p;
//         p->father=pr;
//         p->id=0;
//         p->same_up=NULL;
//         p->same_down=NULL;
//         p->son=NULL;
//         p->function=function;
//         p->function_id=function_id;
//         p->menu_name=name;
//         return p;//返回新创建的子节点
//     }
//     return pr;//返回已存在的子节点
// }

// /**
//  * @description: 菜单结构建立
//  * 
//  * @param: head 头节点 往下创建选项
//  */
// void menu_make(menu_t *head)
// {
//     menu_t *first_page=NULL;
//     init_mempool(first_page,5*sizeof(menu_t));
//     first_page=(menu_t *)malloc(sizeof(menu_t));

//     head=add_same_node(head,menu0,0,"页0");
//     add_son_node(head,0,menu1,1,"页1选项1");
//     add_same_node(first_page,menu2,2,"页1选项2");
//     add_same_node(first_page,menu3,3,"页1选项3");
//     add_same_node(first_page,menu4,4,"页1选项4");
// }
