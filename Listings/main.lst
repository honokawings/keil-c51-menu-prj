C51 COMPILER V9.52.0.0   MAIN                                                              10/23/2020 17:24:19 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: H:\electric\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\List
                    -ings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          /**
   2           * @file: main.c
   3           * @author: Honokawings (1915569481@qq.com)
   4           * @description: 主程序，主要进行菜单的高级操作
   5           * @version 0.1
   6           * @date: 2020-10-23 16:10:43
   7           * 
   8           * @copyright Copyright (c) 2020
   9           * 
  10           */
  11          #include "sys.h"
  12          
  13          extern MenuIndex code menu_gather[5];
  14          char last_operation;
  15          char now_operation;
  16          char function_index=0;
  17          
  18          void main()
  19          {
  20   1          last_operation=0;
  21   1          now_operation=0;
  22   1      
  23   1          lcd_init(0);
  24   1          key_init();
  25   1          interrupt_init();
  26   1          timer0_init();//相关模块初始化
  27   1          //config_uart(9600);
  28   1      
  29   1      
  30   1          while (1)
  31   1          {
  32   2              if((now_operation!=last_operation)&&
  33   2              (last_operation==0))//按键检测变化且刚开始变化
  34   2              {
  35   3                  switch (now_operation)
  36   3                  {
  37   4                      case 1://短按
  38   4                      {
  39   5                          function_index=menu_gather[function_index].move_enter;
  40   5                      }
  41   4                          break;
  42   4                      case 3://长按
  43   4                      {
  44   5                          function_index=menu_gather[function_index].move_esc;
  45   5                      }
  46   4                          break;
  47   4                      case 2://双击
  48   4                      {
  49   5                      
  50   5                      }
  51   4                          break;                    
  52   4                      case 5://正转
  53   4                      {
  54   5                          function_index=menu_gather[function_index].move_up;
C51 COMPILER V9.52.0.0   MAIN                                                              10/23/2020 17:24:19 PAGE 2   

  55   5                      }
  56   4                          break;
  57   4                      case -5://反转
  58   4                      {
  59   5                          function_index=menu_gather[function_index].move_down;
  60   5                      }
  61   4                          break;                         
  62   4                      default:
  63   4                          break;
  64   4                  }           
  65   3              }
  66   2              menu_gather[function_index].function();
  67   2          }
  68   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    194    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
