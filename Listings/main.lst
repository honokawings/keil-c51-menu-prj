C51 COMPILER V9.52.0.0   MAIN                                                              10/24/2020 15:57:26 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: H:\electric\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\List
                    -ings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          /**
   2           * @file: main.c
   3           * @author: Honokawings (1915569481@qq.com)
   4           * @description: ä¸»ç¨‹åºï¼Œä¸»è¦è¿›è¡Œèœå•çš„é«˜çº§æ“ä½œ
   5           * @version 0.1
   6           * @date: 2020-10-23 16:10:43
   7           * 
   8           * @copyright Copyright (c) 2020
   9           * 
  10           */
  11          #include "sys.h"
  12          
  13          extern MenuIndex menu_gather[8];
  14          char last_operation;
  15          char now_operation;
  16          char function_index=0;
  17          void (*current_operation_index)();
  18          
  19          void main()
  20          {
  21   1          int i=0;
  22   1          char buff_index;
  23   1          last_operation=0;
  24   1          now_operation=0;
  25   1      
  26   1          lcd_init(0);
  27   1          // config_uart(9600);
  28   1          key_init();
  29   1          interrupt_init();
  30   1          timer0_init();//ç›¸å…³æ¨¡å—åˆå§‹åŒ–
  31   1      
  32   1          menu0();
  33   1          while (1)
  34   1          {
  35   2              if((now_operation!=last_operation)&&
  36   2              ((last_operation==0)||(last_operation==4)))//æŒ‰é”®æ£€æµ‹å˜åŒ–ä¸”åˆšå¼€å§‹å˜åŒ–,æ³¨æ„æ»¤é™¤è¿ç
             -»­é•¿æŒ‰å›æŠ¥
  37   2              {
  38   3                  switch (now_operation)
  39   3                  {
  40   4                      case 1://çŸ­æŒ‰
  41   4                      {
  42   5                          function_index=menu_gather[function_index].move_enter;
  43   5                          // uart_send(&function_index);//debug
  44   5                      }
  45   4                          break;
  46   4                      case 3://é•¿æŒ‰
  47   4                      {
  48   5                          function_index=0;
  49   5                          // uart_send(&function_index);//debug
  50   5                      }
  51   4                          break;
  52   4                      case 2://åŒå‡»
  53   4                      {
C51 COMPILER V9.52.0.0   MAIN                                                              10/24/2020 15:57:26 PAGE 2   

  54   5                          buff_index=function_index;//äº¤äº’ä½“éªŒï¼Œè¿”å›åå†è¿›å…¥ä¼šè®°å¿†ä¹‹å‰çš„é€‰é¡¹
  55   5                          function_index=menu_gather[function_index].move_esc;
  56   5                          //é˜²æ­¢é¦–é¡µæ—¶æŒ‰escå¯¼è‡´è‡ªé”
  57   5                          if(buff_index!=0)
  58   5                              menu_gather[function_index].move_enter=buff_index;
  59   5                          // uart_send(&function_index);//debug
  60   5                      }
  61   4                          break;                    
  62   4                      case 5://æ­£è½¬
  63   4                      {
  64   5                          function_index=menu_gather[function_index].move_up;
  65   5                          // uart_send(&function_index);//debug
  66   5                      }
  67   4                          break;
  68   4                      case -5://åè½¬
  69   4                      {
  70   5                          function_index=menu_gather[function_index].move_down;
  71   5                          // uart_send(&function_index);//debug
  72   5                      }
  73   4                          break;                         
  74   4                      default:
  75   4                          break;
  76   4                  } 
  77   3              current_operation_index=menu_gather[function_index].function;
  78   3              (*current_operation_index)();                     
  79   3              }
  80   2          }
  81   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    155    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      6       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
